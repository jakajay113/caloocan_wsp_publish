<!doctype html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cedula Taxpayer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /*Font Style*/
        body {
            font-family: 'Lato', sans-serif;
        }

        .load-container {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .wrapper {
            position: absolute;
            top: -35px;
            transform: scale(1.5);
        }

        .loader {
            height: 25px;
            width: 1px;
            position: absolute;
            animation: rotate 3.5s linear infinite;
        }

            .loader .dot {
                top: 30px;
                height: 7px;
                width: 7px;
                background: black;
                border-radius: 50%;
                position: relative;
            }

        /*.loader-text{
          position: absolute;
          bottom: -85px;
          font-size: 25px;
          font-weight: 400;
          font-family: sans-serif;
          color: black;
        }*/
        @keyframes rotate {
            30% {
                transform: rotate(220deg);
            }

            40% {
                transform: rotate(450deg);
                opacity: 1;
            }

            75% {
                transform: rotate(720deg);
                opacity: 1;
            }

            76% {
                opacity: 0;
            }

            100% {
                opacity: 0;
                transform: rotate(0deg);
            }
        }

        .loader:nth-child(1) {
            animation-delay: 0.15s;
        }

        .loader:nth-child(2) {
            animation-delay: 0.3s;
        }

        .loader:nth-child(3) {
            animation-delay: 0.45s;
        }

        .loader:nth-child(4) {
            animation-delay: 0.6s;
        }

        .loader:nth-child(5) {
            animation-delay: 0.75s;
        }

        .loader:nth-child(6) {
            animation-delay: 0.9s;
        }

        /*----------------------------------Radial Menu --------------------------------*/
        * {
            box-sizing: border-box;
        }

        /* body {
    background-color: #462882;
    height: 100vh;
    width: 100vw;
    position: relative;
    }*/
        .radial-menu-container {
            position: fixed;
            bottom: 1em;
            right: 1em;
        }

        .menu-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #f8f9fa;
            box-shadow: 4px 4px 2px 1px rgba(0, 0, 0, 0.2);
            position: absolute;
            z-index: 5;
            bottom: 0;
            right: 0;
            display: table;
            text-align: center;
            cursor: pointer;
        }

            .menu-toggle .fa {
                color: #fff;
                font-size: 2em;
                display: table-cell;
                vertical-align: middle;
                transition: 0.4s;
            }

            .menu-toggle.open .fa {
                transform: rotate(135deg);
            }

        .btn-app {
            width: 3.5em;
            height: 3.5em;
            border-radius: 50%;
            position: absolute;
            background-color: #f8f9fa;
            color: #fff;
            text-align: center;
            cursor: pointer;
        }

            .btn-app .fa {
                line-height: 2.5em;
            }

        .open .btn-app {
            box-shadow: 4px 4px 2px 1px rgba(0, 0, 0, 0.2);
        }

        .menu-round {
            position: absolute;
            bottom: 0;
            right: 0;
            z-index: 3;
        }

            .menu-round .btn-app {
                bottom: 0.25em;
                right: 0.25em;
                transition: 0.4s;
            }

            .menu-round.open .btn-app:nth-of-type(1) {
                right: 0.5em;
                bottom: 4.25em;
                transition-delay: 0.2s;
            }

            .menu-round.open .btn-app:nth-of-type(2) {
                right: 3.5em;
                bottom: 3.5em;
                transition-delay: 0.1s;
            }

            .menu-round.open .btn-app:nth-of-type(3) {
                right: 4.25em;
                bottom: 0.5em;
            }

        .menu-line {
            position: absolute;
            z-index: 2;
        }

            .menu-line .btn-app {
                bottom: 0;
                right: 0.5em;
                transition: 0.3s;
                transition-delay: 0.5s;
            }

            .menu-line.open .btn-app:nth-of-type(1) {
                bottom: 4.25em;
            }

            .menu-line.open .btn-app:nth-of-type(1) {
                bottom: 5.25em;
            }

            .menu-line.open .btn-app:nth-of-type(2) {
                bottom: 9.25em;
            }

            .menu-line.open .btn-app:nth-of-type(3) {
                bottom: 13.25em;
            }

            .menu-line.open .btn-app:nth-of-type(4) {
                bottom: 17.25em;
            }

            .menu-line.open .btn-app:nth-of-type(5) {
                bottom: 19.25em;
            }

            .menu-line.open .btn-app:nth-of-type(6) {
                bottom: 22.25em;
            }

            .menu-line.open .btn-app:nth-of-type(7) {
                bottom: 25.25em;
            }

        /*----------------------------------End Radial Menu--------------------------------*/

        /*---------------------------------Radial Menu Tool Tip----------------------------------------*/
        .tooltip {
            position: absolute;
            top: 50%;
            right: 110%;
            /* Adjust the distance from the icon */
            transform: translateY(-50%);
            /* Center vertically */
            background-color: #333;
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            width: 120px;
            text-align: center;
        }

        .btn-app:hover .tooltip {
            opacity: 1;
        }

        /*---------------------------------End Radial Menu Tool Tip----------------------------------------*/
        /*---------------------------------Remarks Sticker----------------------------------------*/
        .note {
            position: relative;
            margin-top: 60px;
            background-color: #FFFFA5;
            min-width: 180px;
            width: 100%;
            max-width: 380px;
            margin-right: auto;
            margin-left: auto;
            padding: 20px;
            -webkit-transform: rotate(-1deg);
            -moz-transform: rotate(-1deg);
            -o-transform: rotate(-1deg);
            -ms-transform: rotate(-1deg);
            transform: rotate(-1deg);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .note-list {
            li;

        {
            list-style-type: none;
            &:before;

        {
            content: '-';
            margin-right: 0.75em;
            margin-left: -1.125em;
            ;
        }

        }
        }

        .tape {
            background-color: hsla(0,0%,100%,.3);
            box-shadow: inset 0 0 1em .5em hsla(0,0%,100%,.1);
            height: 3em;
            position: absolute;
            top: -22px;
            left: 0;
            right: 0;
            margin-left: auto;
            margin-right: auto;
            min-width: 100px;
            transform: rotate(1deg);
            max-width: 180px;
            -webkit-filter: drop-shadow(0 1px 0.7px hsla(0,0%,0%,.3));
        }

            .tape:after,
            .tape:before {
                background-size: .4em .4em;
                bottom: 0;
                content: '';
                position: absolute;
                top: 0;
                width: .2em;
            }

            .tape:after {
                background-image: linear-gradient(45deg, transparent 50%, hsla(0,0%,100%,.3) 50%), linear-gradient(-45deg, transparent 50%, hsla(0,0%,100%,.3) 50%);
                background-position: 0 100%;
                left: -.2em;
            }

            .tape:before {
                background-image: linear-gradient(135deg, transparent 50%, hsla(0,0%,100%,.3) 50%), linear-gradient(-135deg, transparent 50%, hsla(0,0%,100%,.3) 50%);
                background-position: 100% 100%;
                right: -.2em;
            }

        /*---------------------------------End Remarks Sticker----------------------------------------*/


    </style>
</head>
<body class="d-flex flex-column h-100">

    <header class="p-3 mb-3 border-bottom bg-light">
        <div class="container-fluid">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 link-body-emphasis text-decoration-none">
                    <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                        <use xlink:href="#bootstrap"></use>
                    </svg>
                </a>

                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="index.html" class="nav-link px-2 link-secondary  fw-bold">Treasury Information Management System</a></li>
                    <li><a href="#" class="nav-link backToWebPortal px-2 link-secondary">Back To Web Portal</a></li>
                </ul>


                <div class="dropdown text-end">
                    <a href="#" class="d-block link-body-emphasis text-decoration-none dropdown-toggle link-secondary"
                       data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="https://cdn-icons-png.flaticon.com/512/1144/1144760.png" alt="mdo" width="32" height="32"
                             class="rounded-circle">
                        <span class="user">User</span>
                    </a>
                    <ul class="dropdown-menu text-small">
                        <li><a class="dropdown-item logout" href="#">Sign out</a></li>
                    </ul>
                </div>

            </div>
        </div>
    </header>

    <main class="container">

        <div class="row align-items-md-stretch g-3 m-auto">
            <div class="col individual-cedula">
                <div class="h-100 p-5 bg-light border rounded-3 text-center">
                    <div class="spic-icon">
                        <img src="../icons/individual.gif" alt="Icon 2" class="img-fluid" width="200" height="200">
                    </div>
                    <!-- <h4 class="registration-type">Individual Cedula</h4> -->
                    <div class="spic-button mt-3">
                        <button type="button" class="btn btn-dark registration-type new-registration">Individual Cedula</button>
                    </div>
                </div>
            </div>

            <div class="col corporation-cedula">
                <div class="h-100 p-5 bg-light border rounded-3 text-center">
                    <div class="spic-icon">
                        <img src="../icons/corporation.gif" alt="Icon 2" class="img-fluid" width="200" height="200">
                    </div>
                    <!-- <h4 class="registration-type">Corporation Cedula</h4> -->
                    <div class="spic-button mt-3">
                        <button type="button" class="btn btn-dark registration-type new-registration">Corporation Cedula</button>
                    </div>
                </div>
            </div>

            <div class="col professional-tax-receipt">
                <div class="h-100 p-5 bg-light border rounded-3 text-center">
                    <div class="spic-icon">
                        <img src="../icons/profesitional.gif" alt="Icon 2" class="img-fluid" width="200" height="200">
                    </div>
                    <!-- <h4 class="registration-type">Professional Tax Receipt</h4> -->
                    <div class="spic-button  mt-3">
                        <button type="button" class="btn btn-dark registration-type new-registration">Professional Tax Receipt</button>
                    </div>
                </div>
            </div>



            <div class="col form-type">
                <div class="h-100 bg-light border rounded-3">
                    <div class="container-fluid">
                        <!-- <h4 class="form-title mt-3 mb-4">Form</h4> -->
                        <div class="row align-items-center">
                            <div class="col-auto">
                                <img src="#" alt="Icon 2" class="img-fluid cedula-icons" width="200" height="200">
                            </div>
                            <div class="col">
                                <h1 class="fw-bold form-title"></h1>
                            </div>
                        </div>

                        <!--Individual Cedula Form-->
                        <div class="container individual-cedula-form">

                        </div>
                        <!--End Individual Cedula Form-->
                        <!--Corporation Cedula Form-->
                        <div class="container corporation-cedula-form">

                        </div>
                        <!--End Corporation Cedula Form-->
                        <!--Professional Tax Receipt Form-->
                        <div class="container professional-tax-receipt-form">

                        </div>
                        <!--End Professional Tax Receipt Form-->


                    </div>


                </div>
            </div>



            <!--Success-->
            <div class="col success-page">
            </div>
            <!--End Success-->
            <!-- Notification-->
            <div class="modal fade" id="appNotification" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                 aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-md modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel"></h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="container d-flex justify-content-center align-items-center">
                                <div class="row">
                                    <video width="100" height="100" preload="none"
                                           style="background: transparent  url('https://cdn-icons-png.flaticon.com/512/10468/10468726.png') 50% 50% / fit no-repeat;"
                                           autoplay="autoplay" loop="true" muted="muted" playsinline="">
                                        <source src="https://cdn-icons-mp4.flaticon.com/512/10468/10468726.mp4" type="video/mp4">
                                    </video>
                                    <span class="fw-bold fs-5 app-notification-messages text-center"></span>
                                </div>

                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-dark new-registration" data-bs-dismiss="modal">Ok</button>
                        </div>
                    </div>
                </div>
            </div>

            <!--End Notification-->
            <!--Loader-->
            <div class="modal" id="apploader" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                 aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-body">
                        <div class="load-container">
                            <div class="wrapper">
                                <div class="loader">
                                    <div class="dot"></div>
                                </div>
                                <div class="loader">
                                    <div class="dot"></div>
                                </div>
                                <div class="loader">
                                    <div class="dot"></div>
                                </div>
                                <div class="loader">
                                    <div class="dot"></div>
                                </div>
                                <div class="loader">
                                    <div class="dot"></div>
                                </div>
                                <div class="loader">
                                    <div class="dot"></div>
                                </div>
                            </div>
                            <!-- <div class="loader-text">
                                          Please wait
                                        </div> -->
                        </div>
                    </div>
                </div>
            </div>
            <!--End Loader-->

        </div>


        <!-- Transactions-->
        <div class="modal fade" id="appNTransactions" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
             aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content rounded-4 shadow">
                    <div class="modal-header border-bottom-0">
                        <h1 class="modal-title fs-3 transaction-modal-title fw-bold"> Modal title</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body py-0">
                        <div class="list-group w-auto transaction-list">
                        </div>
                    </div>
                    <div class="modal-footer flex-column border-top-0">
                        <button type="button" class="btn btn-lg btn-light w-100 mx-0" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!--End Transactions-->



    </main>
    <!-- Raadial menu-->
    <div class="radial-menu-container">
        <div class="menu-toggle">
            <img class="menu-toggle-icon" src="https://cdn-icons-png.flaticon.com/512/3388/3388823.png" width="60" height="60"
                 alt="menu" title="menu" class="img-small">
        </div>

        <div class="menu-line">
            <div class="btn-app home-menu">
                <img src="https://cdn-icons-png.flaticon.com/128/8121/8121334.png" alt="Home"
                     class="img-fluid home-icon-menu" width="100" height="100">
                <div class="tooltip fw-bold">Home</div>
            </div>

            <div class="btn-app">
                <img src="https://cdn-icons-png.flaticon.com/128/6416/6416398.png" alt="Transaction"
                     class="img-fluid transactions-icon-menu" width="100" height="100">
                <div class="tooltip fw-bold">Transactions</div>
            </div>

            <!--<div class="btn-app">
                      <div class="fa fa-graduation-cap"></div>
                    </div>
                    <div class="btn-app">
                      <div class="fa fa-image"></div>
                    </div>
                    <div class="btn-app">
                      <div class="fa fa-vine"></div>
                    </div> -->
        </div>

    </div>
    <!--End radial menu-->
    <!-- View CTC Online Application Attachement-->
    <div class="modal" id="appViewCTCAttachement" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="appViewCTCAttachementLabel"></h5>
                    <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                </div>
                <div class="modal-body bg-light border rounded-3 d-flex justify-content-center align-items-center">
                    <!-- Image to display in the modal -->
                    <img src="#" alt="#" class="img-fluid ctc-attachement-file" style="max-width: 100%;">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-dark ctc-back-to-application" data-bs-dismiss="modal">
                        Back To
                        Application
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!--End View CTC Online Application Attachement-->
    <!-- Footer-->
    <footer class="footer mt-auto py-2 bg-light">
        <div class="container text-center py-2 fw-bold">
            <p>&copy; <span id="currentYear"></span> SPIDC</p>
        </div>
    </footer>
    <!--End Footer-->



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.min.js"></script>
    <script type="text/javascript">

        /*---------------------- LOADER And Also Can Be Used As Document Ready-----------------------------*/


        //Prevent the back button in browser
        function preventBack() {
            window.history.forward();
        }
        setTimeout("preventBack()", 0);
        window.onunload = function () {
            null;
        };
        //End Prevent the back button in browser

        var loader = new bootstrap.Modal(document.getElementById('apploader'));
        var notification = new bootstrap.Modal(document.getElementById('appNotification'));
        var transactions = new bootstrap.Modal(document.getElementById('appNTransactions'));
        document.onreadystatechange = function () {
            if (document.readyState !== "complete") {
                loader.show();
            } else {
                loader.hide();
                footerCurrentYear();
                appCheckToken();
                accountProfile();
                radialNavBar();
                radialNavBarMenu();
                backToWebPortal();
                logout();
            }
        };





        /*----------------------End  LOADER -----------------------------*/


        //Payment Calculation Individual And Corporation
        var SalariesTax = "";
        var IncomeRealPropertyTax = "";
        var RealPropertyTax = "";
        var GrossRecieptTax = "";
        //This Data Must Be Dynamic
        var Multiplier;
        var BasicTax;
        var MaxInput = 5000;
        var MultiplierCorporation;
        var BasicTaxCorporation;
        var MaxInputCorporation = 10000;
        //Interest
        var currentMonth;
        var CtcMonth;
        var CtcDay;
        var CtcInterest;
        var CtcSucceed;
        //varriable
        var total = "";
        var totalRounded = "";
        var interest = "";
        var interestRounded = "";
        var amountToPay = "";
        //For Individual
        var grossA = 0;
        var salarabyB = 0;
        var incomeC = 0;
        //For Corporation\uy
        var realPropertyA = 0;
        var grossRecieptCorpB = 0;


        document.getElementsByClassName("form-type")[0].style.display = "none";
        document.getElementsByClassName("success-page")[0].style.display = "none";
        var registrationTypeElements = document.getElementsByClassName("registration-type");
        var newRegistrationElements = document.getElementsByClassName("new-registration");
        for (var i = 0; i < registrationTypeElements.length && i < newRegistrationElements.length; i++) {
            // Store the index 'i' as a data attribute on the newRegistration element
            newRegistrationElements[i].setAttribute("data-index", i);
            newRegistrationElements[i].addEventListener("click", function () {
                // Get the index from the data attribute
                var index = this.getAttribute("data-index");
                // Use the index to access the corresponding registrationTypeElement
                var registrationTypeElement = registrationTypeElements[index];
                // Get the text content of the registrationTypeElement
                var registration = registrationTypeElement.textContent;

                if (registration == "Individual Cedula") {

                    //Basic Community Tax Individual
                    //Make Ajax Call
                    $.ajax({
                        url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaGetIndividualBasicTaxToims',
                        type: 'GET',//METHOD
                        data: '{}',
                        async: true,
                        cache: false,
                        dataType: 'json', // DATA TYPE
                        beforeSend: function (xhr) {
                            // Set the Authorization header with the Bearer token
                            xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                            loader.show();
                        },
                        success: function (response) {
                            loader.hide();
                            // HANDLES SUCCESS REPONSE
                            if (response.status) {
                                data = JSON.parse(JSON.stringify(response.data));
                                //Fill or append the data
                                for (var i = 0; i < data.length; i++) {
                                    BasicTax = Number(data[i].Amount);
                                    document.getElementById('_BasicTax').value = BasicTax.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                                }
                                //Multiplier Individual
                                $.ajax({
                                    url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaGetIndividualMultiplierToims',
                                    type: 'GET',//METHOD
                                    data: '{}',
                                    async: true,
                                    cache: false,
                                    dataType: 'json', // DATA TYPE
                                    beforeSend: function (xhr) {
                                        // Set the Authorization header with the Bearer token
                                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                                        loader.show();
                                    },
                                    success: function (response) {
                                        loader.hide();
                                        // HANDLES SUCCESS REPONSE
                                        if (response.status) {
                                            // Parse the JSON response
                                            parsedResponse = JSON.parse(JSON.stringify(response));
                                            // Access the INDIVIDUALMULTIPLIER value
                                            individualMultiplier = parsedResponse.data[0].INDIVIDUALMULTIPLIER;
                                            Multiplier = Number(individualMultiplier);
                                            //Interest
                                            $.ajax({
                                                url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaGetInterestToims',
                                                type: 'GET',//METHOD
                                                data: '{}',
                                                async: true,
                                                cache: false,
                                                dataType: 'json', // DATA TYPE
                                                beforeSend: function (xhr) {
                                                    // Set the Authorization header with the Bearer token
                                                    xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                                                    loader.show();
                                                },
                                                success: function (response) {
                                                    loader.hide();
                                                    // HANDLES SUCCESS REPONSE
                                                    if (response.status) {
                                                        // Parse the JSON response
                                                        parsedInterestResponse = JSON.parse(JSON.stringify(response));
                                                        // Access the interest value
                                                        cMonth = parsedInterestResponse.data[0].CurrentDate;
                                                        Month = parsedInterestResponse.data[0].CtcMonth;
                                                        Day = parsedInterestResponse.data[0].CtcDay;
                                                        Interest = parsedInterestResponse.data[0].CtcInterest;
                                                        Succeed = parsedInterestResponse.data[0].CtcSucceed;
                                                        currentMonth = Number(cMonth);
                                                        CtcMonth = Number(Month);
                                                        CtcDay = Number(Day);
                                                        CtcInterest = Number(Interest);
                                                        CtcSucceed = Number(Succeed);
                                                    }
                                                },
                                                error: function (xhr, status, error) {
                                                    // HANDLES ERROR REPONSE
                                                    console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                                                    console.log(xhr.responseText); // Log the response text received from the server
                                                    console.log(errorThrown);
                                                }
                                            });
                                            //End Interest
                                        }
                                    },
                                    error: function (xhr, status, error) {
                                        // HANDLES ERROR REPONSE
                                        console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                                        console.log(xhr.responseText); // Log the response text received from the server
                                        console.log(errorThrown);
                                    }
                                });
                                //EndMultiplier Individual


                            }
                        },
                        error: function (xhr, status, error) {
                            // HANDLES ERROR REPONSE
                            console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                            console.log(xhr.responseText); // Log the response text received from the server
                            console.log(errorThrown);
                        }
                    });
                    //alert(registration);
                    //registration Type
                    document.getElementsByClassName("individual-cedula")[0].style.display = "none";
                    document.getElementsByClassName("corporation-cedula")[0].style.display = "none";
                    document.getElementsByClassName("professional-tax-receipt")[0].style.display = "none";
                    //Form Type
                    document.getElementsByClassName("form-type")[0].style.display = "block";
                    //Form Title
                    document.getElementsByClassName("form-title")[0].textContent = registration;
                    //Form
                    document.getElementsByClassName("cedula-icons")[0].src = "../icons/individual.gif";
                    document.getElementsByClassName("individual-cedula-form")[0].style.display = "block";
                    document.getElementsByClassName("corporation-cedula-form")[0].style.display = "none";
                    document.getElementsByClassName("professional-tax-receipt-form")[0].style.display = "none";
                    //Form HTML
                    document.getElementsByClassName("individual-cedula-form")[0].innerHTML = '<div class="row"> <div class="col mb-5"> <h4>Personal Information</h4> <div class="row mb-1"> <label for="_FirstName" class="col-sm-3 col-form-label col-form-label-sm">First Name</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_FirstName" id="_FirstName"> </div> </div> <div class="row mb-1"> <label for="_MiddleName" class="col-sm-3 col-form-label col-form-label-sm">Middle Name</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_MiddleName" id="_MiddleName"> </div> </div> <div class="row mb-1"> <label for="_LastName" class="col-sm-3 col-form-label col-form-label-sm">Last Name</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_LastName" id="_LastName"> </div> </div> <div class="row mb-1"> <label for="_BirthPlace" class="col-sm-3 col-form-label col-form-label-sm">Birth Place</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_BirthPlace" id="_BirthPlace"> </div> </div> <div class="row mb-1"> <label for="_BirthDate" class="col-sm-3 col-form-label col-form-label-sm">Birth Date</label> <div class="col-sm-9"> <input type="date" class="form-control form-control-sm" name="_BirthDate" id="_BirthDate"> </div> </div> <div class="row mb-1"> <label for="_Address" class="col-sm-3 col-form-label col-form-label-sm">Address</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_Address" id="_Address"> </div> </div> <div class="row mb-1"> <label for="_Gender" class="col-sm-3 col-form-label col-form-label-sm">Gender</label> <div class="col-sm-9"> <div class="form-check form-check-inline"> <input class="form-check-input form-check-input-sm" type="radio" name="_Gender" id="_Male" value="Male" required> <label class="form-check-label" for="_Male">Male</label> </div> <div class="form-check form-check-inline"> <input class="form-check-input form-check-input-sm" type="radio" name="_Gender" id="_Female" value="Female" required> <label class="form-check-label" for="_Female">Female</label> </div> </div> </div> <div class="row mb-1"> <label for="_CivilStatus" class="col-sm-3 col-form-label col-form-label-sm">Civil Status</label> <div class="col-sm-9"> <select class="form-select form-select-sm" id="_CivilStatus"> <option value="">Select Civil Status</option> <option value="Single">Single</option> <option value="option2">Married</option> <option value="option3">Separated</option> </select> </div> </div> <!-- <div class="row mb-1"> <label for="_notAfilipino" class="col-sm-3 col-form-label col-form-label-sm"></label> <div class="col-sm-9"> <div class="form-check form-check-inline"> <input class="form-check-input form-check-input-sm" type="checkbox" name="_notAfilipino" id="_notAfilipino" value="Not a Filipino"> <label class="form-check-label" for="_notAfilipino">Not a Filipino</label> </div> </div> </div>--> <div class="row mb-1"> <label for="_Citizenship" class="col-sm-3 col-form-label col-form-label-sm">Citizenship</label> <div class="col-sm-9"> <select class="form-select form-select-sm" name="_Citizenship" id="_Citizenship"> <option value="">Select Civil Status</option> <option value="Filipino" selected>Filipino</option> <option value="afghan">Afghan</option> <option value="albanian">Albanian</option> <option value="algerian">Algerian</option> <option value="american">American</option> <option value="andorran">Andorran</option> <option value="angolan">Angolan</option> <option value="antiguans">Antiguans</option> <option value="argentinean">Argentinean</option> <option value="armenian">Armenian</option> <option value="australian">Australian</option> <option value="austrian">Austrian</option> <option value="azerbaijani">Azerbaijani</option> <option value="bahamian">Bahamian</option> <option value="bahraini">Bahraini</option> <option value="bangladeshi">Bangladeshi</option> <option value="barbadian">Barbadian</option> <option value="barbudans">Barbudans</option> <option value="batswana">Batswana</option> <option value="belarusian">Belarusian</option> <option value="belgian">Belgian</option> <option value="belizean">Belizean</option> <option value="beninese">Beninese</option> <option value="bhutanese">Bhutanese</option> <option value="bolivian">Bolivian</option> <option value="bosnian">Bosnian</option> <option value="brazilian">Brazilian</option> <option value="british">British</option> <option value="bruneian">Bruneian</option> <option value="bulgarian">Bulgarian</option> <option value="burkinabe">Burkinabe</option> <option value="burmese">Burmese</option> <option value="burundian">Burundian</option> <option value="cambodian">Cambodian</option> <option value="cameroonian">Cameroonian</option> <option value="canadian">Canadian</option> <option value="cape verdean">Cape Verdean</option> <option value="central african">Central African</option> <option value="chadian">Chadian</option> <option value="chilean">Chilean</option> <option value="chinese">Chinese</option> <option value="colombian">Colombian</option> <option value="comoran">Comoran</option> <option value="congolese">Congolese</option> <option value="costa rican">Costa Rican</option> <option value="croatian">Croatian</option> <option value="cuban">Cuban</option> <option value="cypriot">Cypriot</option> <option value="czech">Czech</option> <option value="danish">Danish</option> <option value="djibouti">Djibouti</option> <option value="dominican">Dominican</option> <option value="dutch">Dutch</option> <option value="east timorese">East Timorese</option> <option value="ecuadorean">Ecuadorean</option> <option value="egyptian">Egyptian</option> <option value="emirian">Emirian</option> <option value="equatorial guinean">Equatorial Guinean</option> <option value="eritrean">Eritrean</option> <option value="estonian">Estonian</option> <option value="ethiopian">Ethiopian</option> <option value="fijian">Fijian</option> <option value="finnish">Finnish</option> <option value="french">French</option> <option value="gabonese">Gabonese</option> <option value="gambian">Gambian</option> <option value="georgian">Georgian</option> <option value="german">German</option> <option value="ghanaian">Ghanaian</option> <option value="greek">Greek</option> <option value="grenadian">Grenadian</option> <option value="guatemalan">Guatemalan</option> <option value="guinea-bissauan">Guinea-Bissauan</option> <option value="guinean">Guinean</option> <option value="guyanese">Guyanese</option> <option value="haitian">Haitian</option> <option value="herzegovinian">Herzegovinian</option> <option value="honduran">Honduran</option> <option value="hungarian">Hungarian</option> <option value="icelander">Icelander</option> <option value="indian">Indian</option> <option value="indonesian">Indonesian</option> <option value="iranian">Iranian</option> <option value="iraqi">Iraqi</option> <option value="irish">Irish</option> <option value="israeli">Israeli</option> <option value="italian">Italian</option> <option value="ivorian">Ivorian</option> <option value="jamaican">Jamaican</option> <option value="japanese">Japanese</option> <option value="jordanian">Jordanian</option> <option value="kazakhstani">Kazakhstani</option> <option value="kenyan">Kenyan</option> <option value="kittian and nevisian">Kittian and Nevisian</option> <option value="kuwaiti">Kuwaiti</option> <option value="kyrgyz">Kyrgyz</option> <option value="laotian">Laotian</option> <option value="latvian">Latvian</option> <option value="lebanese">Lebanese</option> <option value="liberian">Liberian</option> <option value="libyan">Libyan</option> <option value="liechtensteiner">Liechtensteiner</option> <option value="lithuanian">Lithuanian</option> <option value="luxembourger">Luxembourger</option> <option value="macedonian">Macedonian</option> <option value="malagasy">Malagasy</option> <option value="malawian">Malawian</option> <option value="malaysian">Malaysian</option> <option value="maldivan">Maldivan</option> <option value="malian">Malian</option> <option value="maltese">Maltese</option> <option value="marshallese">Marshallese</option> <option value="mauritanian">Mauritanian</option> <option value="mauritian">Mauritian</option> <option value="mexican">Mexican</option> <option value="micronesian">Micronesian</option> <option value="moldovan">Moldovan</option> <option value="monacan">Monacan</option> <option value="mongolian">Mongolian</option> <option value="moroccan">Moroccan</option> <option value="mosotho">Mosotho</option> <option value="motswana">Motswana</option> <option value="mozambican">Mozambican</option> <option value="namibian">Namibian</option> <option value="nauruan">Nauruan</option> <option value="nepalese">Nepalese</option> <option value="new zealander">New Zealander</option> <option value="ni-vanuatu">Ni-Vanuatu</option> <option value="nicaraguan">Nicaraguan</option> <option value="nigerien">Nigerien</option> <option value="north korean">North Korean</option> <option value="northern irish">Northern Irish</option> <option value="norwegian">Norwegian</option> <option value="omani">Omani</option> <option value="pakistani">Pakistani</option> <option value="palauan">Palauan</option> <option value="panamanian">Panamanian</option> <option value="papua new guinean">Papua New Guinean</option> <option value="paraguayan">Paraguayan</option> <option value="peruvian">Peruvian</option> <option value="polish">Polish</option> <option value="portuguese">Portuguese</option> <option value="qatari">Qatari</option> <option value="romanian">Romanian</option> <option value="russian">Russian</option> <option value="rwandan">Rwandan</option> <option value="saint lucian">Saint Lucian</option> <option value="salvadoran">Salvadoran</option> <option value="samoan">Samoan</option> <option value="san marinese">San Marinese</option> <option value="sao tomean">Sao Tomean</option> <option value="saudi">Saudi</option> <option value="scottish">Scottish</option> <option value="senegalese">Senegalese</option> <option value="serbian">Serbian</option> <option value="seychellois">Seychellois</option> <option value="sierra leonean">Sierra Leonean</option> <option value="singaporean">Singaporean</option> <option value="slovakian">Slovakian</option> <option value="slovenian">Slovenian</option> <option value="solomon islander">Solomon Islander</option> <option value="somali">Somali</option> <option value="south african">South African</option> <option value="south korean">South Korean</option> <option value="spanish">Spanish</option> <option value="sri lankan">Sri Lankan</option> <option value="sudanese">Sudanese</option> <option value="surinamer">Surinamer</option> <option value="swazi">Swazi</option> <option value="swedish">Swedish</option> <option value="swiss">Swiss</option> <option value="syrian">Syrian</option> <option value="taiwanese">Taiwanese</option> <option value="tajik">Tajik</option> <option value="tanzanian">Tanzanian</option> <option value="thai">Thai</option> <option value="togolese">Togolese</option> <option value="tongan">Tongan</option> <option value="trinidadian or tobagonian">Trinidadian or Tobagonian</option> <option value="tunisian">Tunisian</option> <option value="turkish">Turkish</option> <option value="tuvaluan">Tuvaluan</option> <option value="ugandan">Ugandan</option> <option value="ukrainian">Ukrainian</option> <option value="uruguayan">Uruguayan</option> <option value="uzbekistani">Uzbekistani</option> <option value="venezuelan">Venezuelan</option> <option value="vietnamese">Vietnamese</option> <option value="welsh">Welsh</option> <option value="yemenite">Yemenite</option> <option value="zambian">Zambian</option> <option value="zimbabwean">Zimbabwean</option> </select> </div> </div> <div class="row mb-1"> <label for="_Weight" class="col-sm-3 col-form-label col-form-label-sm">Weight</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_Weight" id="_Weight"> </div> </div> <div class="row mb-1"> <label for="_Height" class="col-sm-3 col-form-label col-form-label-sm">Height</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_Height" id="_Height"> </div> </div> <div class="row mb-1"> <label for="_TIN" class="col-sm-3 col-form-label col-form-label-sm">TIN</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" id="_TIN"> </div> </div> <div class="row mb-1"> <label for="_Profession" class="col-sm-3 col-form-label col-form-label-sm">Profession</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_Profession" id="_Profession"> </div> </div> <div class="row mb-1"> <label for="_AttachementFile1" class="col-sm-3 col-form-label col-form-label-sm">Attachement File</label> <div class="col-sm-9 ctc-file-attachement1"> <input type="file" class="form-control form-control-sm" name="_AttachementFile1" id="_AttachementFile1"> </div> </div> <!-- <div class="row mb-1"> <label for="_Req2" class="col-sm-3 col-form-label col-form-label-sm">Requirements 2</label> <div class="col-sm-9"> <input type="file" class="form-control form-control-sm" name="_Req2" id="_Req2"> </div> </div> --> </div> <div class="col"> <h4>Payment Information</h4> <div class="border"> <table class="table table-bordered"> <tbody><tr> <td>Basic Community Tax:</td> <td width="40%"><input type="text" class="form-control input-sm" name="_BasicTax" id="_BasicTax" readonly="readonly"></td> </tr> <tr> <td colspan="2">Additional Community Tax:</td> </tr> <tr> <td>Gross Receipts or Earnings Derived from Business During the Preceding Year (Annual)</td> <td><input type="text" class="form-control input-sm" onkeyup="GrossReciept(this.value)" onkeypress="return /[0-9]/.test(event.key)" name="_GrossReciept" id="_GrossReciept" placeholder="Enter Gross Receipt"></td> </tr> <tr> <td>Salaries or Gross Receipt or Earnings Derived from Exercise of Profession or pursuit of any occupation (Annual)</td> <td><input type="text" class="form-control input-sm" onkeyup="Salaries(this.value)" onkeypress="return /[0-9]/.test(event.key)"name="_Salaries" id="_Salaries" placeholder="Enter Salaries"></td> </tr> <tr> <td>Income from Real Property (Annual)</td> <td><input type="text" class="form-control input-sm" onkeyup="IncomeRealProperty(this.value)" onkeypress="return /[0-9]/.test(event.key)" name="_IncomeRealProperty" id="_IncomeRealProperty" placeholder="Enter Income Real Property"></td> </tr> <tr class="text-end"> <td>Total</td> <td><input type="text" class="form-control input-sm" name="_Total" id="_Total" placeholder="0.00"></td> </tr> <tr class="text-end"> <td>Interest</td> <td><input type="text" class="form-control input-sm" name="_Interest" id="_Interest" placeholder="0.00"></td> </tr> <tr class="text-end"> <td>Amount To Pay</td> <td><input type="text" class="form-control input-sm" name="_AmountToPay" id="_AmountToPay" placeholder="0.00"></td> </tr> <tr> <td colspan="2"> <div class="d-grid gap-2"> <button class="btn btn-dark _BtnSubmitIndividualCedula" type="button">Submit</button> </div> </td> </tr> </tbody> </table> </div> </div> </div>';

                    //Submit Individual Cedula
                    SubmitIndividualCedula();

                } else if (registration == "Corporation Cedula") {
                    //Basic Community Tax Corporation
                    //Make Ajax Call
                    $.ajax({
                        url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaGetCorporationBasicTaxToims',
                        data: '{}',
                        async: true,
                        cache: false,
                        dataType: 'json', // DATA TYPE
                        beforeSend: function (xhr) {
                            // Set the Authorization header with the Bearer token
                            xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                            loader.show();
                        },
                        success: function (response) {
                            loader.hide();
                            // HANDLES SUCCESS REPONSE
                            if (response.status) {
                                data = JSON.parse(JSON.stringify(response.data));
                                //Fill or append the data
                                for (var i = 0; i < data.length; i++) {
                                    BasicTaxCorporation = Number(data[i].Amount);
                                    document.getElementById('_CBasicTax').value = BasicTaxCorporation.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                                }

                                //Multiplier Corporation
                                $.ajax({
                                    url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaGetCorporationMultiplierToims',
                                    type: 'GET',//METHOD
                                    data: '{}',
                                    async: true,
                                    cache: false,
                                    dataType: 'json', // DATA TYPE
                                    beforeSend: function (xhr) {
                                        // Set the Authorization header with the Bearer token
                                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                                        loader.show();
                                    },
                                    success: function (response) {
                                        loader.hide();
                                        // HANDLES SUCCESS REPONSE
                                        if (response.status) {
                                            // Parse the JSON response
                                            parsedResponse = JSON.parse(JSON.stringify(response));
                                            // Access the INDIVIDUALMULTIPLIER value
                                            corporationMultiplier = parsedResponse.data[0].CORPORATIONMULTIPLIER;
                                            MultiplierCorporation = Number(corporationMultiplier);
                                            //Interest
                                            $.ajax({
                                                url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaGetInterestToims',
                                                type: 'GET',//METHOD
                                                data: '{}',
                                                async: true,
                                                cache: false,
                                                dataType: 'json', // DATA TYPE
                                                beforeSend: function (xhr) {
                                                    // Set the Authorization header with the Bearer token
                                                    xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                                                    loader.show();
                                                },
                                                success: function (response) {
                                                    loader.hide();
                                                    // HANDLES SUCCESS REPONSE
                                                    if (response.status) {
                                                        // Parse the JSON response
                                                        parsedInterestResponse = JSON.parse(JSON.stringify(response));
                                                        // Access the interest value
                                                        cMonth = parsedInterestResponse.data[0].CurrentDate;
                                                        Month = parsedInterestResponse.data[0].CtcMonth;
                                                        Day = parsedInterestResponse.data[0].CtcDay;
                                                        Interest = parsedInterestResponse.data[0].CtcInterest;
                                                        Succeed = parsedInterestResponse.data[0].CtcSucceed;
                                                        currentMonth = Number(cMonth);
                                                        CtcMonth = Number(Month);
                                                        CtcDay = Number(Day);
                                                        CtcInterest = Number(Interest);
                                                        CtcSucceed = Number(Succeed);
                                                    }
                                                },
                                                error: function (xhr, status, error) {
                                                    // HANDLES ERROR REPONSE
                                                    console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                                                    console.log(xhr.responseText); // Log the response text received from the server
                                                    console.log(errorThrown);
                                                }
                                            });
                                            //End Interest
                                        }
                                    },
                                    error: function (xhr, status, error) {
                                        // HANDLES ERROR REPONSE
                                        console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                                        console.log(xhr.responseText); // Log the response text received from the server
                                        console.log(errorThrown);
                                    }
                                });
                                //End Multiplier Corporation

                            }
                        },
                        error: function (xhr, status, error) {
                            // HANDLES ERROR REPONSE
                            console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                            console.log(xhr.responseText); // Log the response text received from the server
                            console.log(errorThrown);
                        }
                    });
                    // alert(registration);
                    document.getElementsByClassName("individual-cedula")[0].style.display = "none";
                    document.getElementsByClassName("corporation-cedula")[0].style.display = "none";
                    document.getElementsByClassName("professional-tax-receipt")[0].style.display = "none";
                    //Form Type
                    document.getElementsByClassName("form-type")[0].style.display = "block";
                    //Form Title
                    document.getElementsByClassName("form-title")[0].textContent = registration;
                    //Form
                    document.getElementsByClassName("cedula-icons")[0].src = "../icons/corporation.gif";
                    document.getElementsByClassName("individual-cedula-form")[0].style.display = "none";
                    document.getElementsByClassName("corporation-cedula-form")[0].style.display = "block";
                    document.getElementsByClassName("professional-tax-receipt-form")[0].style.display = "none";
                    //Form HTML
                    document.getElementsByClassName("corporation-cedula-form")[0].innerHTML = '<div class="row"> <div class="col mb-5"> <h4>Company Information</h4> <div class="row mb-1"> <label for="_CCompanyName" class="col-sm-3 col-form-label col-form-label-sm">Company Name</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_CCompanyName" id="_CCompanyName"> </div> </div> <div class="row mb-1"> <label for="_CAddress" class="col-sm-3 col-form-label col-form-label-sm">Address</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_CAddress" id="_CAddress"> </div> </div> <div class="row mb-1"> <label for="_CKindofOrganization" class="col-sm-3 col-form-label col-form-label-sm">Kind of Organization</label> <div class="col-sm-9"> <select class="form-select form-select-sm" id="_CKindofOrganization"> <option value="">Select Organization</option> <option value="Corporation">Corporation</option> <option value="Association">Association</option> <option value="Partnership">Partnership</option> </select> </div> </div> <div class="row mb-1"> <label for="_CBusinessNature" class="col-sm-3 col-form-label col-form-label-sm">Business Nature</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_CBusinessNature" id="_CBusinessNature"> </div> </div> <div class="row mb-1"> <label for="_CPlaceofOrganization" class="col-sm-3 col-form-label col-form-label-sm">Place of Organization</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_CPlaceofOrganization" id="_CPlaceofOrganization"> </div> </div> <div class="row mb-1"> <label for="_CDateofOrganization" class="col-sm-3 col-form-label col-form-label-sm">Date of Organization</label> <div class="col-sm-9"> <input type="date" class="form-control form-control-sm" name="_CDateofOrganization" id="_CDateofOrganization"> </div> </div> <div class="row mb-1"> <label for="_AttachementFile2" class="col-sm-3 col-form-label col-form-label-sm">Attachement File</label> <div class="col-sm-9 ctc-file-attachement2"> <input type="file" class="form-control form-control-sm" name="_AttachementFile2" id="_AttachementFile2"> </div> </div> </div> <div class="col"> <h4>Payment Information</h4> <div class="border"> <table class="table table-bordered"> <tbody><tr> <td>Basic Community Tax:</td> <td width="40%"><input type="text" class="form-control input-sm" name="_CBasicTax" id="_CBasicTax" readonly="readonly"></td> </tr> <tr> <td colspan="2">Additional Community Tax:</td> </tr> <tr> <td>Assessed value of real property own in the philippines (Annual)</td> <td><input type="text" class="form-control input-sm" onkeyup="RealPropertyCorporation(this.value)" onkeypress="return /[0-9]/.test(event.key)" name="_CRealProperty" id="_CRealProperty" placeholder="Real Property"></td> </tr> <tr> <td>Gross receipts, including dividends/earnings derived from business in the philippines during the preceding year (Annual)</td> <td><input type="text" class="form-control input-sm" onkeyup="GrossRecieptCorporation(this.value)" onkeypress="return /[0-9]/.test(event.key)" name="_CGrossReciept" id="_CGrossReciept" placeholder="Gross Reciept"></td> </tr> <tr class="text-end"> <td>Total</td> <td><input type="text" class="form-control input-sm" name="_CTotal" id="_CTotal" placeholder="0.00"></td> </tr> <tr class="text-end"> <td>Interest</td> <td><input type="text" class="form-control input-sm" name="_CInterest" id="_CInterest" placeholder="0.00"></td> </tr> <tr class="text-end"> <td>Amount To Pay</td> <td><input type="text" class="form-control input-sm" name="_CAmountToPay" id="_CAmountToPay" placeholder="0.00"></td> </tr> <tr> <td colspan="2"> <div class="d-grid gap-2"> <button class="btn btn-dark _BtnSubmitCorporationCedula" type="button">Submit</button> </div> </td> </tr> </tbody> </table> </div> </div> </div';

                    //Submit Corporation Cedula
                    SubmitCorporationCedula();


                } else if (registration == "Professional Tax Receipt") {
                    //alert(registration);
                    document.getElementsByClassName("individual-cedula")[0].style.display = "none";
                    document.getElementsByClassName("corporation-cedula")[0].style.display = "none";
                    document.getElementsByClassName("professional-tax-receipt")[0].style.display = "none";
                    //Form Type
                    document.getElementsByClassName("form-type")[0].style.display = "block";
                    //Form Title
                    document.getElementsByClassName("form-title")[0].textContent = registration;
                    //Form
                    document.getElementsByClassName("cedula-icons")[0].src = "../icons/profesitional.gif";
                    document.getElementsByClassName("individual-cedula-form")[0].style.display = "none";
                    document.getElementsByClassName("corporation-cedula-form")[0].style.display = "none";
                    document.getElementsByClassName("professional-tax-receipt-form")[0].style.display = "block";

                    //Form HTML
                    document.getElementsByClassName("professional-tax-receipt-form")[0].innerHTML = ' <div class="row"> <div class="col mb-5"> <h4>Personal Information</h4> <div class="row mb-1"> <label for="_PTRFirsTName" class="col-sm-3 col-form-label col-form-label-sm">First Name</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_PTRFirsTName" id="_PTRFirsTName"> </div> </div> <div class="row mb-1"> <label for="_PTRMiddleName" class="col-sm-3 col-form-label col-form-label-sm">Middle Name</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_PTRMiddleName" id="_PTRMiddleName"> </div> </div> <div class="row mb-1"> <label for="_PTRLastName" class="col-sm-3 col-form-label col-form-label-sm">Last Name</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_PTRLastName" id="_PTRLastName"> </div> </div> <div class="row mb-1"> <label for="_PTRGender" class="col-sm-3 col-form-label col-form-label-sm">Gender</label> <div class="col-sm-9"> <div class="form-check form-check-inline"> <input class="form-check-input form-check-input-sm" type="radio" name="_PTRGender" id="Male" value="Male"> <label class="form-check-label" for="Male">Male</label> </div> <div class="form-check form-check-inline"> <input class="form-check-input form-check-input-sm" type="radio" name="_PTRGender" id="Female" value="Female"> <label class="form-check-label" for="Female">Female</label> </div> </div> </div> <div class="row mb-1"> <label for="_PTRTIN" class="col-sm-3 col-form-label col-form-label-sm">TIN</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" id="_PTRTIN"> </div> </div> <div class="row mb-1"> <label for="_PTRProfession" class="col-sm-3 col-form-label col-form-label-sm">Profession</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_PTRProfession" id="_PTRProfession"> </div> </div> <div class="row mb-1"> <label for="_PTRPRCNo" class="col-sm-3 col-form-label col-form-label-sm">PRC No</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" name="_PTRPRCNo" id="_PTRPRCNo"> </div> </div> </div> <div class="col"> <h4>Payment Information</h4> <div class="row mb-1"> <label for="_PTRFee" class="col-sm-3 col-form-label col-form-label-sm">Fee</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" onkeypress="return /[0-9]/.test(event.key)" name="_PTRFee" id="_PTRFee" placeholder="0.00"> </div> </div> <div class="row mb-1"> <label for="_PTRPenalty" class="col-sm-3 col-form-label col-form-label-sm">Penalty</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" onkeypress="return /[0-9]/.test(event.key)" name="_PTRPenalty" id="_PTRPenalty" placeholder="0.00"> </div> </div> <div class="row mb-1"> <label for="_PTRSurcharge" class="col-sm-3 col-form-label col-form-label-sm">Surcharge</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" onkeypress="return /[0-9]/.test(event.key)" name="_PTRSurcharge" id="_PTRSurcharge" placeholder="0.00"> </div> </div> <div class="row mb-1"> <label for="_PTRAmountToPay" class="col-sm-3 col-form-label col-form-label-sm">Amount To Pay</label> <div class="col-sm-9"> <input type="text" class="form-control form-control-sm" onkeypress="return /[0-9]/.test(event.key)" name="_PTRAmountToPay" id="_PTRAmountToPay" placeholder="0.00"> </div> </div> <div class="row mb-1 mt-4"> <div class="d-grid gap-2"> <button class="btn btn-dark _BtnSubmitProfessionalTaxReceipt" type="button">Submit</button> </div> </div> </div> </div>';

                    //Submit Corporation Cedula
                    SubmitProfessionalTaxReceipt();
                }
            });
        }



        //GrossReciept Payment Calculation
        function GrossReciept(GrossRecieptAmount) {
            if (document.getElementById('_GrossReciept').value) {
                GrossRecieptTax = removeHundreds(GrossRecieptAmount) / 1000 * Multiplier;
                if (MaxInput < GrossRecieptTax) {
                    GrossRecieptTax = MaxInput;
                } else {
                    //Do Nothing
                }
                grossA = GrossRecieptTax;
                //Total
                //totalRounded = BasicTax  + GrossRecieptTax;
                totalRounded = BasicTax  + grossA + salarabyB + incomeC;
                document.getElementById('_Total').value = totalRounded.toFixed(2);
                //Interest
                total = BasicTax + grossA + salarabyB + incomeC;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_Interest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_AmountToPay').value = amountToPay.toFixed(2);
            } else {

                BasicTax = 0;
                grossA = 0;
                salarabyB = 0;
                incomeC = 0;

                GrossRecieptTax = removeHundreds(GrossRecieptAmount) / 1000 * Multiplier;
                if (MaxInput < GrossRecieptTax) {
                    GrossRecieptTax = MaxInput;
                } else {
                    //Do Nothing
                }
                grossA = GrossRecieptTax;
                //Total
                //totalRounded = BasicTax  + GrossRecieptTax;
                totalRounded = BasicTax  + grossA + salarabyB + incomeC;
                document.getElementById('_Total').value = totalRounded.toFixed(2);
                //Interest
                total = BasicTax + grossA + salarabyB + incomeC;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_Interest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_AmountToPay').value = amountToPay.toFixed(2);

                /*document.getElementById('_Total').value = "0.00";
                  document.getElementById('_Interest').value = "0.00";
                  document.getElementById('_AmountToPay').value = "0.00";*/
            }
        }
        //Salaries Payment Calculation
        function Salaries(SalariesAmount) {
            if (document.getElementById('_Salaries').value) {
                SalariesTax = removeHundreds(SalariesAmount) / 1000 * Multiplier;
                if (MaxInput < SalariesTax) {
                    SalariesTax = MaxInput;
                } else {
                    //Do Nothing
                }
                salarabyB =  SalariesTax;
                //Total
                //totalRounded = BasicTax + SalariesTax;
                totalRounded = BasicTax + grossA + salarabyB + incomeC;
                document.getElementById('_Total').value = totalRounded.toFixed(2);
                //Interest
                //total = BasicTax + SalariesTax;
                total = BasicTax+ grossA + salarabyB + incomeC;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_Interest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_AmountToPay').value = amountToPay.toFixed(2);
            } else {

                BasicTax = 0;
                grossA = 0;
                salarabyB = 0;
                incomeC = 0;

                SalariesTax = removeHundreds(SalariesAmount) / 1000 * Multiplier;
                if (MaxInput < SalariesTax) {
                    SalariesTax = MaxInput;
                } else {
                    //Do Nothing
                }
                salarabyB =  SalariesTax;
                //Total
                //totalRounded = BasicTax + SalariesTax;
                totalRounded = BasicTax + grossA + salarabyB + incomeC;
                document.getElementById('_Total').value = totalRounded.toFixed(2);
                //Interest
                //total = BasicTax + SalariesTax;
                total = BasicTax+ grossA + salarabyB + incomeC;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_Interest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_AmountToPay').value = amountToPay.toFixed(2);
                /*document.getElementById('_Total').value = "";
                document.getElementById('_Interest').value = "";
                document.getElementById('_AmountToPay').value = "";*/
            }
        }
        //IncomeRealProperty payment Calculation
        function IncomeRealProperty(IncomeRealPropertyAmount) {
            if (document.getElementById('_IncomeRealProperty').value) {
                IncomeRealPropertyTax = removeHundreds(IncomeRealPropertyAmount) / 1000 * Multiplier;
                if (MaxInput < IncomeRealPropertyTax) {
                    IncomeRealPropertyTax = MaxInput;
                } else {
                    //Do Nothing
                }
                incomeC = IncomeRealPropertyTax;
                //Total
                //totalRounded = BasicTax + IncomeRealPropertyTax;
                totalRounded = BasicTax + + grossA + salarabyB + incomeC;
                document.getElementById('_Total').value = totalRounded.toFixed(2);
                //Interest
                //total = BasicTax + IncomeRealPropertyTax;
                total = BasicTax+ grossA + salarabyB + incomeC;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_Interest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_AmountToPay').value = amountToPay.toFixed(2);
            } else {

                BasicTax = 0;
                grossA = 0;
                salarabyB = 0;
                incomeC = 0;

                IncomeRealPropertyTax = removeHundreds(IncomeRealPropertyAmount) / 1000 * Multiplier;
                if (MaxInput < IncomeRealPropertyTax) {
                    IncomeRealPropertyTax = MaxInput;
                } else {
                    //Do Nothing
                }
                incomeC = IncomeRealPropertyTax;
                //Total
                //totalRounded = BasicTax + IncomeRealPropertyTax;
                totalRounded = BasicTax + + grossA + salarabyB + incomeC;
                document.getElementById('_Total').value = totalRounded.toFixed(2);
                //Interest
                //total = BasicTax + IncomeRealPropertyTax;
                total = BasicTax+ grossA + salarabyB + incomeC;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_Interest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_AmountToPay').value = amountToPay.toFixed(2);


                /*document.getElementById('_Total').value = "";
               document.getElementById('_Interest').value = "";
               document.getElementById('_AmountToPay').value = "";*/
            }

        }


        //Real Property Corporation payment Calculation
        function RealPropertyCorporation(RealPropertyAmount) {
            if (document.getElementById('_CRealProperty').value) {
                RealPropertyTax = removeHundredsCorporation(RealPropertyAmount) / 5000 * MultiplierCorporation;
                if (MaxInputCorporation < RealPropertyTax) {
                    RealPropertyTax = MaxInputCorporation;
                } else {
                    //Do Nothing
                }
                realPropertyA = RealPropertyTax;
                //Total
                //totalRounded = BasicTaxCorporation + RealPropertyTax;
                totalRounded = BasicTaxCorporation + realPropertyA + grossRecieptCorpB;
                document.getElementById('_CTotal').value = totalRounded.toFixed(2);
                //Interest
                //total = BasicTaxCorporation + RealPropertyTax;
                total = BasicTaxCorporation + realPropertyA + grossRecieptCorpB;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_CInterest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_CAmountToPay').value = amountToPay.toFixed(2);
            } else {

                BasicTaxCorporation = 0;
                RealPropertyTax = removeHundredsCorporation(RealPropertyAmount) / 5000 * MultiplierCorporation;
                if (MaxInputCorporation < RealPropertyTax) {
                    RealPropertyTax = MaxInputCorporation;
                } else {
                    //Do Nothing
                }
                realPropertyA = RealPropertyTax;
                //Total
                //totalRounded = BasicTaxCorporation + RealPropertyTax;
                totalRounded = BasicTaxCorporation + realPropertyA + grossRecieptCorpB;
                document.getElementById('_CTotal').value = totalRounded.toFixed(2);
                //Interest
                //total = BasicTaxCorporation + RealPropertyTax;
                total = BasicTaxCorporation + realPropertyA + grossRecieptCorpB;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_CInterest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_CAmountToPay').value = amountToPay.toFixed(2);

                /*document.getElementById('_CTotal').value = "";
                document.getElementById('_CInterest').value = "";
                document.getElementById('_CAmountToPay').value = "";*/
            }

        }
        //Gross Reciept Corporation payment Calculation
        function GrossRecieptCorporation(GrossRecieptCorporationAmount) {
            if (document.getElementById('_CGrossReciept').value) {
                GrossRecieptTax = removeHundredsCorporation(GrossRecieptCorporationAmount) / 5000 * MultiplierCorporation;
                if (MaxInputCorporation < GrossRecieptTax) {
                    GrossRecieptTax = MaxInputCorporation;
                } else {
                    //Do Nothing
                }
                grossRecieptCorpB  = GrossRecieptTax;
                //Total
                //totalRounded = BasicTaxCorporation + GrossRecieptTax;
                totalRounded = BasicTaxCorporation + realPropertyA + grossRecieptCorpB;
                document.getElementById('_CTotal').value = totalRounded.toFixed(2);
                //Interest
                //total = BasicTaxCorporation + GrossRecieptTax;
                total = BasicTaxCorporation + realPropertyA + grossRecieptCorpB;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_CInterest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_CAmountToPay').value = amountToPay.toFixed(2);
            } else {

                BasicTaxCorporation = 0;
                GrossRecieptTax = removeHundredsCorporation(GrossRecieptCorporationAmount) / 5000 * MultiplierCorporation;
                if (MaxInputCorporation < GrossRecieptTax) {
                    GrossRecieptTax = MaxInputCorporation;
                } else {
                    //Do Nothing
                }
                grossRecieptCorpB  = GrossRecieptTax;
                //Total
                //totalRounded = BasicTaxCorporation + GrossRecieptTax;
                totalRounded = BasicTaxCorporation + realPropertyA + grossRecieptCorpB;
                document.getElementById('_CTotal').value = totalRounded.toFixed(2);
                //Interest
                //total = BasicTaxCorporation + GrossRecieptTax;
                total = BasicTaxCorporation + realPropertyA + grossRecieptCorpB;
                interestRounded = total * currentMonth * CtcSucceed / 100;
                document.getElementById('_CInterest').value = interestRounded.toFixed(2);
                //Amount To Pay
                interest = total * currentMonth * CtcSucceed / 100;
                amountToPay = total + interest
                document.getElementById('_CAmountToPay').value = amountToPay.toFixed(2);
                /*document.getElementById('_CTotal').value = "";
                document.getElementById('_CInterest').value = "";
                document.getElementById('_CAmountToPay').value = "";*/
            }

        }

        // Function to remove the hundreds digit from a number
        function removeHundreds(number) {
            return Math.floor(number / 1000) * 1000;
        }
        function removeHundredsCorporation(number) {
            return Math.floor(number / 5000) * 5000;
        }
        //End Payment Calculation


        //Submit Individual Cedula
        function SubmitIndividualCedula() {
            document.getElementsByClassName("_BtnSubmitIndividualCedula")[0].addEventListener('click', function () {
                //Personal Information
                var _FirstName = document.getElementById('_FirstName').value;
                var _MiddleName = document.getElementById('_MiddleName').value;
                var _LastName = document.getElementById('_LastName').value;
                var _BirthPlace = document.getElementById('_BirthPlace').value;
                var _BirthDate = document.getElementById('_BirthDate').value;
                var _Address = document.getElementById('_Address').value;
                var _Gender = $('input[name=_Gender]:checked').val();
                var _CivilStatus = document.getElementById('_CivilStatus').value;
                var _Citizenship = document.getElementById('_Citizenship').value;
                var _Weight = document.getElementById('_Weight').value;
                var _Height = document.getElementById('_Height').value;
                var _TIN = document.getElementById('_TIN').value;
                var _Profession = document.getElementById('_Profession').value
                var _AttachementFile1 = document.getElementById('_AttachementFile1');
                //var _Req2 = document.getElementById('_Req2');
                //Payment Information
                var _BasicTax = document.getElementById('_BasicTax').value;
                var _GrossReciept = document.getElementById('_GrossReciept').value;
                var _Salaries = document.getElementById('_Salaries').value
                var _IncomeRealProperty = document.getElementById('_IncomeRealProperty').value;
                var _Total = document.getElementById('_Total').value;
                var _Interest = document.getElementById('_Interest').value;
                var _AmountToPay = document.getElementById('_AmountToPay').value;
                // Declare a global JSON object
                var individualCedula = {};
                var filebase64;
                var required = true;
                var notificationMSG;

                if (_FirstName) { individualCedula.Email = localStorage.getItem('UserID'); individualCedula.FirstName = _FirstName; document.getElementById('_FirstName').classList.remove('is-invalid'); } else { document.getElementById('_FirstName').classList.add('is-invalid'); notificationMSG = "Please enter first name!"; required = false; }
                //if(_MiddleName){ individualCedula.MiddleName = _MiddleName; document.getElementById('_MiddleName').classList.remove('is-invalid');  }else{ document.getElementById('_MiddleName').classList.add('is-invalid');  notificationMSG="Please enter middle name!";  required = false    }
                if (_LastName) { individualCedula.LastName = _LastName; individualCedula.MiddleName = _MiddleName; document.getElementById('_LastName').classList.remove('is-invalid'); } else { document.getElementById('_LastName').classList.add('is-invalid'); notificationMSG = "Please enter last name!"; required = false; }
                if (_BirthPlace) { individualCedula.BirthPlace = _BirthPlace; document.getElementById('_BirthPlace').classList.remove('is-invalid'); } else { document.getElementById('_BirthPlace').classList.add('is-invalid'); notificationMSG = "Please enter birth place!"; required = false; }
                if (_BirthDate) { individualCedula.BirthDate = _BirthDate; document.getElementById('_BirthDate').classList.remove('is-invalid'); } else { document.getElementById('_BirthDate').classList.add('is-invalid'); notificationMSG = "Please enter birth date!"; required = false; }
                if (_Address) { individualCedula.Address = _Address; document.getElementById('_Address').classList.remove('is-invalid'); } else { document.getElementById('_Address').classList.add('is-invalid'); notificationMSG = "Please enter address!"; required = false; }
                if (_Gender) { individualCedula.Gender = _Gender; document.getElementById('_Male').classList.remove('is-invalid'); document.getElementById('_Female').classList.remove('is-invalid'); } else { document.getElementById('_Male').classList.add('is-invalid'); document.getElementById('_Female').classList.add('is-invalid'); notificationMSG = "Please select gender!"; required = false; }
                if (_CivilStatus) { individualCedula.CivilStatus = _CivilStatus; document.getElementById('_CivilStatus').classList.remove('is-invalid'); } else { document.getElementById('_CivilStatus').classList.add('is-invalid'); notificationMSG = "Please select civil status!"; required = false; }
                if (_Citizenship) { individualCedula.Citizenship = _Citizenship; document.getElementById('_Citizenship').classList.remove('is-invalid'); } else { document.getElementById('_Citizenship').classList.add('is-invalid'); notificationMSG = "Please select civil citizenship!"; required = false; }
                if (_Weight) { individualCedula.Weight = _Weight; document.getElementById('_Weight').classList.remove('is-invalid'); } else { document.getElementById('_Weight').classList.add('is-invalid'); notificationMSG = "Please enter weight!"; required = false; }
                if (_Height) { individualCedula.Height = _Height; document.getElementById('_Height').classList.remove('is-invalid'); } else { document.getElementById('_Height').classList.add('is-invalid'); notificationMSG = "Please enter height!"; required = false; }
                if (_TIN) { individualCedula.TIN = _TIN; document.getElementById('_TIN').classList.remove('is-invalid'); } else { document.getElementById('_TIN').classList.add('is-invalid'); notificationMSG = "Please enter tin no!"; required = false; }
                if (_Profession) { individualCedula.Profession = _Profession; document.getElementById('_Profession').classList.remove('is-invalid'); } else { document.getElementById('_Profession').classList.add('is-invalid'); notificationMSG = "Please enter profesion!"; required = false; }
                if (_AttachementFile1.files.length > 0) {
                    var selectedFile = _AttachementFile1.files[0];
                    if (selectedFile) {
                        // Get file information
                        // Display file information
                        individualCedula.FileName = selectedFile.name;
                        individualCedula.FileSize = selectedFile.size;
                        individualCedula.FileType = selectedFile.type;
                        // Convert the file to a varbinary representation (Base64)
                        var reader = new FileReader();
                        reader.onload = function () {
                            var base64String = reader.result.split(',')[1]; // Get the base64 data
                            // Send the base64String to your server or use it as needed
                            individualCedula.FileBase64 = base64String;
                            if (_GrossReciept || _Salaries || _IncomeRealProperty) {
                                individualCedula.BasicTax = _BasicTax,
                                  individualCedula.GrossReciept = _GrossReciept,
                                  individualCedula.Salaries = _Salaries,
                                  individualCedula.IncomeRealProperty = _IncomeRealProperty,
                                  individualCedula.Total = _Total,
                                  individualCedula.Interest = _Interest,
                                  individualCedula.AmountToPay = _AmountToPay;
                            } else {
                                notificationMSG = "Please enter gross or salaries or income real property!";
                                notification.show();
                                document.getElementsByClassName('app-notification-messages')[0].textContent = notificationMSG;
                                required = false;
                            }
                            if (required) {
                                document.getElementsByClassName('_BtnSubmitIndividualCedula')[0].setAttribute('disabled', 'true');
                                // AJAX CALL I PUT AJAX CALL HERE BECAUSE BASE64 CANT ACCESS OUTSIDE The FileReader operates asynchronously, and the reader.onload
                                $.ajax({
                                    type: 'POST',
                                    async: true,
                                    cache: false,
                                    url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaPostIndividualTims',
                                    data: JSON.stringify(individualCedula),
                                    contentType: 'application/json',
                                    beforeSend: function (xhr) {
                                        // Set the Authorization header with the Bearer token
                                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                                        // This code is executed before the request is sent
                                        // You can show a loading spinner or make other preparations
                                        //Set The Loader
                                        loader.show();
                                    },
                                    success: function (response) {
                                        // HANDLES SUCCESS REPONSE
                                        // You can hide or remove the loadining now
                                        if (response.status) {
                                            notification.hide();
                                            loader.hide();
                                            document.getElementsByClassName("form-type")[0].style.display = "none";
                                            document.getElementsByClassName("individual-cedula-form")[0].style.display = "none";
                                            document.getElementsByClassName("corporation-cedula-form")[0].style.display = "none";
                                            document.getElementsByClassName("professional-tax-receipt-form")[0].style.display = "none";
                                            document.getElementsByClassName("success-page")[0].style.display = "block";
                                            //Send Email
                                            var htmlContent ='<h1>Hi'+ _FirstName +" "+ _MiddleName+" "+ _LastName +" " + 'Your application is being processed!</h1>';
                                            sendEmail(localStorage.getItem('UserID'), _FirstName +" "+ _MiddleName+" "+ _LastName, "Cedula Application", htmlContent);
                                            document.getElementsByClassName("success-page")[0].innerHTML = '<div class="col success-page"> <div class="h-100 bg-light border rounded-3"> <div class="container"> <div class="row"> <div class="col-md-12 d-flex justify-content-center align-items-center" style="min-height: 75vh;"> <div class="text-center">  <img src="../icons/success.gif" alt="Icon 2" class="img-fluid" width="200" height="200"> <h1>Thank you! </h1> <p>Your application has been sent.</p> </div> </div> </div> </div> </div> </div>';
                                            //Send Email

                                        } else {
                                            console.log(response.status, response.message);
                                        }
                                    },
                                    error: function (error) {
                                        // Handle any errors
                                        //console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                                        console.log(xhr.responseText); // Log the response text received from the server
                                        //console.log(errorThrown);
                                    }
                                });
                            }

                        };
                        reader.readAsDataURL(selectedFile);
                        document.getElementById('_AttachementFile1').classList.remove('is-invalid');
                    } else {
                        notificationMSG = "Please upload attachement!";
                        document.getElementById('_AttachementFile1').classList.add('is-invalid');
                        required = false;

                    }
                } else {
                    notificationMSG = "Please upload attachement!";
                    document.getElementById('_AttachementFile1').classList.add('is-invalid');
                    required = false;
                    notification.show();
                    document.getElementsByClassName('app-notification-messages')[0].textContent = "Please fill up all required information.";
                    return false;
                }

            });

        }
        //End Submit Individual Cedula

        //Submit Corporation Cedula
        function SubmitCorporationCedula() {
            document.getElementsByClassName("_BtnSubmitCorporationCedula")[0].addEventListener('click', function () {
                //Company Information
                var _CCompanyName = document.getElementById('_CCompanyName').value;
                var _CAddress = document.getElementById('_CAddress').value;
                var _CKindofOrganization = document.getElementById('_CKindofOrganization').value;
                var _CBusinessNature = document.getElementById('_CBusinessNature').value;
                var _CPlaceofOrganization = document.getElementById('_CPlaceofOrganization').value;
                var _CDateofOrganization = document.getElementById('_CDateofOrganization').value;
                var _AttachementFile2 = document.getElementById('_AttachementFile2');
                //Payment Information
                var _CBasicTax = document.getElementById('_CBasicTax').value;
                var _CRealProperty = document.getElementById('_CRealProperty').value;
                var _CGrossReciept = document.getElementById('_CGrossReciept').value;
                var _CTotal = document.getElementById('_CTotal').value;
                var _CInterest = document.getElementById('_CInterest').value;
                var _CAmountToPay = document.getElementById('_CAmountToPay').value;


                // Declare a global JSON object
                var CorporationCedula = {};
                var required = true;
                var notificationMSG;
                if (_CCompanyName) { CorporationCedula.Email = localStorage.getItem('UserID'); CorporationCedula.CompanyName = _CCompanyName; document.getElementById('_CCompanyName').classList.remove('is-invalid'); } else { document.getElementById('_CCompanyName').classList.add('is-invalid'); notificationMSG = "Please enter company name!"; required = false; }
                if (_CAddress) { CorporationCedula.Address = _CAddress; document.getElementById('_CAddress').classList.remove('is-invalid'); } else { document.getElementById('_CAddress').classList.add('is-invalid'); notificationMSG = "Please enter address!"; required = false; }
                if (_CKindofOrganization) { CorporationCedula.KindofOrganization = _CKindofOrganization; document.getElementById('_CKindofOrganization').classList.remove('is-invalid'); } else { document.getElementById('_CKindofOrganization').classList.add('is-invalid'); notificationMSG = "Please select kind of organization!"; required = false; }
                if (_CBusinessNature) { CorporationCedula.BusinessNature = _CBusinessNature; document.getElementById('_CBusinessNature').classList.remove('is-invalid'); } else { document.getElementById('_CBusinessNature').classList.add('is-invalid'); notificationMSG = "Please enter bussiness nature!"; required = false; }
                if (_CPlaceofOrganization) { CorporationCedula.PlaceofOrganization = _CPlaceofOrganization; document.getElementById('_CPlaceofOrganization').classList.remove('is-invalid'); } else { document.getElementById('_CPlaceofOrganization').classList.add('is-invalid'); notificationMSG = "Please enter organization!"; required = false; }
                if (_CDateofOrganization) { CorporationCedula.DateofOrganization = _CDateofOrganization; document.getElementById('_CDateofOrganization').classList.remove('is-invalid'); } else { document.getElementById('_CDateofOrganization').classList.add('is-invalid'); notificationMSG = "Please enter date of organization!"; required = false; }
                if (_AttachementFile2.files.length > 0) {
                    var selectedFile = _AttachementFile2.files[0];
                    if (selectedFile) {
                        // Get file information
                        // Display file information
                        CorporationCedula.FileName = selectedFile.name;
                        CorporationCedula.FileSize = selectedFile.size;
                        CorporationCedula.FileType = selectedFile.type;
                        // Convert the file to a varbinary representation (Base64)
                        var reader = new FileReader();
                        reader.onload = function () {
                            var base64String = reader.result.split(',')[1]; // Get the base64 data
                            // Send the base64String to your server or use it as needed
                            CorporationCedula.FileBase64 = base64String;
                            if (_CRealProperty || _CGrossReciept) {
                                CorporationCedula.BasicTax = _CBasicTax;
                                CorporationCedula.RealProperty = _CRealProperty;
                                CorporationCedula.GrossReciept = _CGrossReciept;
                                CorporationCedula.Total = _CTotal;
                                CorporationCedula.Interest = _CInterest;
                                CorporationCedula.AmountToPay = _CAmountToPay;
                            } else {
                                notificationMSG = "Please enter gross or salaries or income real property!";
                                notification.show();
                                document.getElementsByClassName('app-notification-messages')[0].textContent = notificationMSG;
                                required = false;
                            }
                            if (required) {
                                //Set The Loader
                                loader.show();
                                document.getElementsByClassName('_BtnSubmitCorporationCedula')[0].setAttribute('disabled', 'true');
                                // AJAX CALL I PUT AJAX CALL HERE BECAUSE BASE64 CANT ACCESS OUTSIDE The FileReader operates asynchronously, and the reader.onload
                                $.ajax({
                                    type: 'POST',
                                    url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaPostCorporationTims',
                                    async: true,
                                    cache: false,
                                    data: JSON.stringify(CorporationCedula),
                                    contentType: 'application/json',
                                    beforeSend: function (xhr) {
                                        // Set the Authorization header with the Bearer token
                                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                                        // This code is executed before the request is sent
                                        // You can show a loading spinner or make other preparations
                                        //Set The Loader
                                        loader.show();
                                    },
                                    success: function (response) {
                                        // HANDLES SUCCESS REPONSE
                                        // You can hide or remove the loadining now
                                        if (response.status) {
                                            loader.hide();
                                            document.getElementsByClassName("form-type")[0].style.display = "none";
                                            document.getElementsByClassName("individual-cedula-form")[0].style.display = "none";
                                            document.getElementsByClassName("corporation-cedula-form")[0].style.display = "none";
                                            document.getElementsByClassName("professional-tax-receipt-form")[0].style.display = "none";
                                            document.getElementsByClassName("success-page")[0].style.display = "block";
                                            //Send Email
                                            var htmlContent ='<h1>Hi'+ localStorage.getItem('FirstName') +" "+ localStorage.getItem('MiddleName') +" "+ localStorage.getItem('LastName') +" " + 'Your application is being processed!</h1>';
                                            sendEmail(localStorage.getItem('UserID'), _CCompanyName, "Cedula Application", htmlContent);
                                            document.getElementsByClassName("success-page")[0].innerHTML = '<div class="col success-page"> <div class="h-100 bg-light border rounded-3"> <div class="container"> <div class="row"> <div class="col-md-12 d-flex justify-content-center align-items-center" style="min-height: 75vh;"> <div class="text-center">  <img src="../icons/success.gif" alt="Icon 2" class="img-fluid" width="200" height="200"> <h1>Thank you! </h1> <p>Your application has been sent.</p> </div> </div> </div> </div> </div> </div>';
                                            //Send Email
                                        }
                                    },
                                    error: function (xhr, status, error) {
                                        // Handle any errors
                                        //console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                                        console.log(xhr.responseText); // Log the response text received from the server
                                        //console.log(errorThrown);
                                    }
                                });
                            }
                        };
                        reader.readAsDataURL(selectedFile);
                    } else {
                        notificationMSG = "Please upload attachement!";
                        document.getElementById('_AttachementFile2').classList.add('is-invalid');
                        required = false;
                    }
                } else {
                    notificationMSG = "Please upload attachement!";
                    document.getElementById('_AttachementFile2').classList.add('is-invalid');
                    required = false;
                    notification.show();
                    document.getElementsByClassName('app-notification-messages')[0].textContent = "Please fill up all required information.";
                    return false;
                }


            });
        }


        //Submit Professional Tax Receipt Cedula
        function SubmitProfessionalTaxReceipt() {
            document.getElementsByClassName("_BtnSubmitProfessionalTaxReceipt")[0].addEventListener('click', function () {
                //Personal Information
                var _PTRFirsTName = document.getElementById('_PTRFirsTName').value;
                var _PTRMiddleName = document.getElementById('_PTRMiddleName').value;
                var _PTRLastName = document.getElementById('_PTRLastName').value;
                var _PTRGender = $('input[name=_PTRGender]:checked').val();
                var _PTRTIN = document.getElementById('_PTRTIN').value;
                var _PTRProfession = document.getElementById('_PTRProfession').value;
                var _PTRPRCNo = document.getElementById('_PTRPRCNo').value;
                var ProfessionalTaxReceipt = [];

                if (_PTRFirsTName) { ProfessionalTaxReceipt.Email = "UserEmail3"; ProfessionalTaxReceipt.push(_PTRFirsTName); } else { alert("Please enter first name!"); return false; }
                if (_PTRMiddleName) { ProfessionalTaxReceipt.push(_PTRMiddleName); } else { alert("Please enter middle name!"); return false; }
                if (_PTRLastName) { ProfessionalTaxReceipt.push(_PTRLastName); } else { alert("Please enter last name!"); return false; }
                if (_PTRGender) { ProfessionalTaxReceipt.push(_PTRGender); } else { alert("Please select gender!"); return false; }
                if (_PTRTIN) { ProfessionalTaxReceipt.push(_PTRTIN); } else { alert("Please enter tin!"); return false; }
                if (_PTRProfession) { ProfessionalTaxReceipt.push(_PTRProfession); } else { alert("Please enter profession!"); return false; }
                if (_PTRPRCNo) { ProfessionalTaxReceipt.push(_PTRPRCNo); } else { alert("Please enter prc no!"); return false; }
                if (CorporationCedula) {
                    //Validation Success
                    document.getElementsByClassName("form-type")[0].style.display = "none";
                    document.getElementsByClassName("individual-cedula-form")[0].style.display = "none";
                    document.getElementsByClassName("corporation-cedula-form")[0].style.display = "none";
                    document.getElementsByClassName("professional-tax-receipt-form")[0].style.display = "none";
                    document.getElementsByClassName("success-page")[0].style.display = "block";
                    //Send Email
                    var htmlContent ='<h1>Your application is being processed!</h1>';
                    sendEmail(localStorage.getItem('UserID'), _PTRFirsTName +" "+ _PTRMiddleName+" "+ _PTRLastName, "Cedula Application", htmlContent)
                    document.getElementsByClassName("success-page")[0].innerHTML = '<div class="col success-page"> <div class="h-100 bg-light border rounded-3"> <div class="container"> <div class="row"> <div class="col-md-12 d-flex justify-content-center align-items-center" style="min-height: 75vh;"> <div class="text-center">  <img src="../icons/success.gif" alt="Icon 2" class="img-fluid" width="200" height="200"> <h1>Thank you! </h1> <p>Your application has been sent.</p> </div> </div> </div> </div> </div> </div>';
                    //Send Email
                    //alert('Professional Tax Receipt');
                }

            });
        }

        //Check token is set
        function appCheckToken() {
            if (localStorage.getItem('KeyToken') !=="" && localStorage.getItem('UserType') == "TAXPAYER") {
            } else {
                //Current URL
                var currentURL = window.location.href;
                // Define the new path
                var newPath = "Register.aspx";
                // Replace the old path with the new one
                var newURL = currentURL.replace(/CedulaApp\/Taxpayer\/index\.html/, newPath);
                // Redirect to the new URL
                //window.location.href = newURL;
                window.location.href = localStorage.getItem('webPortalURLLogin');
            }
        }
        //Account Profile
        function accountProfile() {
            document.getElementsByClassName("user")[0].textContent = localStorage.getItem('FirstName') + " " + localStorage.getItem('MiddleName') + " " + localStorage.getItem('LastName');
        }
        //Back To WebPortal
        function backToWebPortal() {
            document.getElementsByClassName("backToWebPortal")[0].addEventListener("click", function (event) {
                event.preventDefault();
                // Current URL
                var currentURL = window.location.href;
                // Define the new path
                var newPath = "Account.aspx";
                // Replace the old path with the new one
                var newURL = currentURL.replace(/CedulaApp\/Taxpayer\/index\.html/, newPath);
                //Remove LocalStorage Item
                localStorage.removeItem('UserID');
                localStorage.removeItem('KeyToken');
                localStorage.removeItem('FirstName');
                localStorage.removeItem('MiddleName');
                localStorage.removeItem('LastName');
                localStorage.removeItem('Gender');
                localStorage.removeItem('Office');
                localStorage.removeItem('UserLevel');
                localStorage.removeItem('UserType');
                // Redirect to the new URL
                //window.location.href = newURL;
                window.location.href = localStorage.getItem('webPortalURLTaxpayer');
            });
        }
        //Logout
        function logout() {
            document.getElementsByClassName("logout")[0].addEventListener("click", function (event) {
                event.preventDefault();
                //Current URL
                var currentURL = window.location.href;
                // Define the new path
                var newPath = "Register.aspx";
                // Replace the old path with the new one
                var newURL = currentURL.replace(/CedulaApp\/Taxpayer\/index\.html/, newPath);
                //Remove LocalStorage Item
                localStorage.removeItem('UserID');
                localStorage.removeItem('KeyToken');
                localStorage.removeItem('FirstName');
                localStorage.removeItem('MiddleName');
                localStorage.removeItem('LastName');
                localStorage.removeItem('Gender');
                localStorage.removeItem('Office');
                localStorage.removeItem('UserLevel');
                localStorage.removeItem('UserType');
                localStorage.removeItem('LoginEmail');
                localStorage.removeItem('LoginPassword');


                // Redirect to the new URL
                //window.location.href = newURL;
                window.location.href =   localStorage.getItem('webPortalURLLogin');

                localStorage.removeItem('url');
                localStorage.removeItem('webPortalURLLogin');
                localStorage.removeItem('webPortalURLTaxpayer');
                localStorage.removeItem('webPortalURLTreasury');
                localStorage.removeItem('apiKey');


            });
        }



        //Radial NavBar Menu
        function radialNavBar() {
            //Icond Menu
            document.getElementsByClassName("home-icon-menu")[0].style.visibility = 'hidden';
            document.getElementsByClassName("transactions-icon-menu")[0].style.visibility = 'hidden';
            let isButtonClicked = false;
            const menuToggleIcon = document.getElementsByClassName("menu-toggle-icon")[0];
            document.getElementsByClassName("menu-toggle")[0].addEventListener("click", function () {
                // Toggle the flag to indicate the button state
                isButtonClicked = !isButtonClicked;
                // Toggle the icon and perform actions based on the button state
                if (isButtonClicked) {
                    document.getElementsByClassName("home-icon-menu")[0].style.visibility = 'visible';
                    document.getElementsByClassName("transactions-icon-menu")[0].style.visibility = 'visible';
                    menuToggleIcon.src = 'https://cdn-icons-png.flaticon.com/512/1828/1828939.png';
                    document.getElementsByClassName("menu-line")[0].classList.add('open');
                    // Additional actions when the button is clicked
                } else {
                    menuToggleIcon.src = 'https://cdn-icons-png.flaticon.com/512/3388/3388823.png';
                    document.getElementsByClassName("menu-line")[0].classList.remove('open');
                    document.getElementsByClassName("home-icon-menu")[0].style.visibility = 'hidden';
                    document.getElementsByClassName("transactions-icon-menu")[0].style.visibility = 'hidden';
                    // Additional actions when the button is not clicked
                }
            });
        }
        //End Radial NavBar Menu

        //Radial NavBar Menu
        function radialNavBarMenu() {
            //Home
            document.getElementsByClassName("home-icon-menu")[0].addEventListener("click", function () {
                window.location.reload();
            });

            //Transaction
            document.getElementsByClassName("transactions-icon-menu")[0].addEventListener("click", function () {
                document.getElementsByClassName("transaction-modal-title")[0].textContent="Transactions";

                $.ajax({
                    url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaGetCTCOnlineApplicationTims',
                    type: 'GET',//METHOD
                    data: '{}',
                    async: true,
                    cache: false,
                    dataType: 'json', // DATA TYPE
                    beforeSend: function (xhr) {
                        // Set the Authorization header with the Bearer token
                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                        // This code is executed before the request is sent
                        // You can show a loading spinner or make other preparations
                        loader.show();
                    },
                    success: function (response) {
                        // HANDLES SUCCESS REPONSE
                        loader.hide();
                        const data = filterData(response, 'Email', localStorage.getItem('UserID'));
                        document.getElementsByClassName("transaction-list")[0].innerHTML ="";
                        console.log(response);
                        var paynow;
                        for (var i = 0; i < data.length; i++) {
                            var firstName = data[i].FirstName || '';
                            var middleName = data[i].MiddleName || '';
                            var lastName = data[i].LastName || '';
                            var companyName = data[i].CompanyName || '';
                            var payNowInformation = data[i].CTC_Type+ "+" +data[i].Email+ "+" +data[i].ControlNo+ "+" + data[i].FirstName + "+" + data[i].MiddleName + "+" + data[i].LastName + "+" + data[i].Address + "+" + data[i].Total + "+" + data[i].AmountToPay;
                            var viewDataInformation;
                            //console.log(data[i].File);
                            //Check CTC type to show viewDataInformation
                            if(data[i].CTC_Type == "Individual Cedula"){
                               // viewDataInformation = data[i].CTC_Type+ "+" +data[i].ControlNo+ "+" +data[i].FirstName+ "+" +data[i].MiddleName+ "+" +data[i].LastName+ "+" +data[i].BirthPlace+ "+" + formatDate(data[i].BirthDate) + "+" +data[i].Address+ "+" +data[i].Gender+ "+" +data[i].CivilStatus+ "+" +data[i].Citizenship+ "+" +data[i].Weight+ "+" +data[i].Height+ "+" +data[i].TIN+ "+" +data[i].Profession+ "+" +data[i].File+ "+" +data[i].BasicCommunityTax+ "+" +data[i].GrossReceipts+ "+" +data[i].SalariesOrGross+ "+" +data[i].IncomeFromRealProperty+ "+" +data[i].Total+ "+" +data[i].Interest+ "+" +data[i].AmountToPay;
                                viewDataInformation = data[i].CTC_Type+ "+" +data[i].ControlNo;
                            }else{
                                //viewDataInformation = data[i].CTC_Type+ "+" +data[i].ControlNo+ "+" +data[i].CompanyName+ "+" +data[i].Address+ "+" +data[i].BusinessNature+ "+" +data[i].PlaceOfOrganization+ "+" +formatDate(data[i].DateOfOrganization)+ "+" +data[i].File+ "+" +data[i].BasicCommunityTax+ "+" +data[i].RealProperty+ "+" +data[i].GrossReceipts+ "+" +data[i].Total+ "+" +data[i].Interest+ "+" +data[i].AmountToPay;
                                viewDataInformation = data[i].CTC_Type+ "+" +data[i].ControlNo;
                            }
                            //Pay Now
                            if(data[i].Status == "Approved"){
                                paynow ='<button type="button" class="btn btn-outline-dark btn-sm fw-bold transaction-PayNow" value="'+ payNowInformation +'" onclick="transactionPayNow(this.value,event)" >Pay Now</button>';
                            }else{
                                paynow="";
                            }
                            document.getElementsByClassName("transaction-list")[0].innerHTML +=
                              '<a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" data-value="'+ viewDataInformation +'" onclick="viewData(event)"  aria-current="true">\n'
                              + '<img src="https://cdn-icons-png.flaticon.com/128/6416/6416398.png" alt="transaction-icons" width="70" height="70" class="flex-shrink-0">\n'
                              + '<div class="d-flex gap-2 w-100 justify-content-between">\n'
                              + '<div class="transaction-contents">\n'
                              + '<h6 class="mb-0 fw-bold">Name: <small class="text-muted">' + firstName + " " + middleName + " " + lastName + " " + companyName + '</small></h6>\n'
                              + '<h6 class="mb-0 fw-bold">Control No: <small class="text-muted">' + data[i].ControlNo + '</small></h6>\n'
                              + '<h6 class="mb-0 fw-bold">Type: <small class="text-muted">' + data[i].CTC_Type + '</small></h6>\n'
                              + '<h6 class="mb-0 fw-bold">Status: <small class="text-muted">' + data[i].Status + '</small></h6>\n'
                              + '<h6 class="mb-1 fw-bold">Amount to Pay: <small class="text-muted">₱ ' + data[i].Total + '</small></h6>\n'
                              + '' + paynow + '\n'
                              + '</div>\n'
                              + '<small class="opacity-50 text-nowrap">'+ formatDate(data[i].TransactionDate) +'</small>\n'
                              + '</div>\n'
                              + '</a>\n';
                        }
                        transactions.show();
                    },
                    error: function (xhr, status, errorThrown) {
                        // HANDLES ERROR REPONSE
                        //console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                        console.log(xhr.responseText); // Log the response text received from the server
                        //console.log(errorThrown);
                    }
                });

            });
        }
        //End Radial NavBar Menu

        //Filter Data
        function filterData(apiResponse, key, value) {
            // Filter the data to get only the objects with the specified key and value
            const filteredData = apiResponse.data.filter(item => item[key] === value);
            return filteredData;
        }
        //End Filter Data
        //Format Date
        function formatDate(key) {
            // Step 1: Parse the original date string into a JavaScript Date object
            var dateObject = new Date(key);
            // Step 2: Extract the year, month, day, hours, minutes, and seconds components
            var year = dateObject.getFullYear();
            var month = String(dateObject.getMonth() + 1).padStart(2, '0'); // Add 1 to the month since it's zero-based
            var day = String(dateObject.getDate()).padStart(2, '0');
            var hours = String(dateObject.getHours()).padStart(2, '0');
            var minutes = String(dateObject.getMinutes()).padStart(2, '0');
            var seconds = String(dateObject.getSeconds()).padStart(2, '0');
            // Step 3: Format the components into the "YYYY-MM-DD HH:MM:SS" format
            //var formattedDate = year + '-' + month + '-' + day + ' ' + hours + ':' + minutes + ':' + seconds;
            var formattedDate = year + '-' + month + '-' + day;
            //document.getElementById("myDate").value = formattedDate;
            return formattedDate;
        }
        //Footer Year
        function footerCurrentYear(){
            // Get the current year
            const currentYear = new Date().getFullYear();
            // Update the content of the "currentYear" span
            document.getElementById("currentYear").textContent = currentYear;
        }

        //Send Email
        function sendEmail(RecipientEmail, RecipientName, Subject, Content){
            var emailPayload = {
                "RecipientEmail": RecipientEmail,
                "RecipientName": RecipientName,
                "Subject": Subject,
                "Content": Content
            }
            $.ajax({
                url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/emailappSendEmail',
                type: 'POST',
                async: true,
                cache: false,
                data: JSON.stringify(emailPayload),
                contentType: 'application/json',
                beforeSend: function (xhr) {
                    // Set the Authorization header with the Bearer token
                    xhr.setRequestHeader('Authorization',  localStorage.getItem('apiKey'));
                },
                success: function (response) {
                    // HANDLES SUCCESS REPONSE
                    if (response.status) {
                        console.log(response);
                    }
                },
                error: function (xhr, status, errorThrown) {
                    // HANDLES ERROR REPONSE
                    //console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                    console.log(xhr.responseText); // Log the response text received from the server
                    //console.log(errorThrown);
                }
            });

        }
        //End Email

        //View Data
        function viewData(event) {
            const key = event.currentTarget.getAttribute('data-value');
            //Handle The Parameter and split It
            const parameter = key.split('+');
            const ctc_type =  parameter[0];
            const id =  parameter[1];
            //alert("View Data Value: " + ctc_type);
            // Find the button with the matching text content and trigger a click event
            const button = Array.from(document.querySelectorAll('.btn-dark.registration-type.new-registration')).find(btn => btn.textContent.trim() === ctc_type);
            // Click the button if found
            if (button) {
                button.click();
            }
            //Hide Transaction list
            transactions.hide();
            //Field Disabled 
            fieldDisabled();
            //Hide the file upload attachment and add button to show attactment and  button submit Check The CTC type to show data
            if(ctc_type =="Individual Cedula"){
                //Make Ajax Call
                $.ajax({
                    url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaGetSpecificCTCOnlineApplicationTims/' + id + '',
                    type: 'GET',//METHOD
                    data: '{}',
                    async: true,
                    cache: false,
                    dataType: 'json', // DATA TYPE
                    beforeSend: function (xhr) {
                        // Set the Authorization header with the Bearer token
                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                        // This code is executed before the request is sent
                        // You can show a loading spinner or make other preparations
                        loader.show();
                    },
                    success: function (response) {
                        // HANDLES SUCCESS REPONSE
                        // You can hide the loader now
                        if (response.status) {
                            //Loader
                            loader.hide();
                            var dataCTC = JSON.parse(JSON.stringify(response.data));
                            //console.log(dataCTC);
                            for (var i = 0; i < dataCTC.length; i++) {
                                // alert(dataCTC[i].ControlNo);
                            //    //Remarks Notes Sticker Tape
                            //   // document.getElementsByClassName("remarks-notes")[0].textContent = dataCTC[i].Remarks;;
                                //Personal Information
                                document.getElementById("_FirstName").value = dataCTC[i].FirstName;
                                document.getElementById("_MiddleName").value = dataCTC[i].MiddleName;
                                document.getElementById("_LastName").value = dataCTC[i].LastName;
                                document.getElementById("_BirthPlace").value = dataCTC[i].BirthPlace;
                                document.getElementById("_BirthDate").value = formatDate(dataCTC[i].BirthDate);
                                document.getElementById("_Address").value = dataCTC[i].Address;
                                document.getElementById(dataCTC[i].Gender === 'Male' ? '_Male' : '_Female').checked = true;
                                document.getElementById("_CivilStatus").value = dataCTC[i].CivilStatus;
                                document.getElementById("_Citizenship").value = dataCTC[i].Citizenship;
                                document.getElementById("_Weight").value = dataCTC[i].Weight;
                                document.getElementById("_Height").value = dataCTC[i].Height;
                                document.getElementById("_TIN").value = dataCTC[i].TIN;
                                document.getElementById("_Profession").value = dataCTC[i].Profession;
                                document.getElementsByClassName("ctc-attachement-file")[0].src = dataCTC[i].File;
                                //Payment Information
                                document.getElementById("_BasicTax").value = dataCTC[i].BasicCommunityTax;
                                document.getElementById("_GrossReciept").value = dataCTC[i].GrossReceipts;
                                document.getElementById("_Salaries").value = dataCTC[i].SalariesOrGross;
                                document.getElementById("_IncomeRealProperty").value = dataCTC[i].IncomeFromRealProperty;
                                document.getElementById("_Total").value = dataCTC[i].Total;
                                document.getElementById("_Interest").value = dataCTC[i].Interest;
                                document.getElementById("_AmountToPay").value = dataCTC[i].AmountToPay;
                            }

                            document.getElementById("_AttachementFile1").style.display = "none";
                            document.getElementsByClassName("ctc-file-attachement1")[0].innerHTML='<button type="button" class="btn btn-light btn-sm btnView" data-bs-toggle="modal" data-bs-target="#appViewCTCAttachement"><img class="icon-view" src="https://cdn-icons-png.flaticon.com/128/11677/11677497.png" width="30" height="30" alt="View" title="View">View Attachement</button>';
                            document.getElementsByClassName("_BtnSubmitIndividualCedula")[0].style.display = "none";
 

                        }
                    },
                    error: function (xhr, status, errorThrown) {
                        // HANDLES ERROR REPONSE
                        //console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                        console.log(xhr.responseText); // Log the response text received from the server
                        //console.log(errorThrown);
                    }
                });
                //End
               
            }else{

                //Make Ajax Call
                $.ajax({
                    url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/cedulaGetSpecificCTCOnlineApplicationTims/' + id + '',
                    type: 'GET',//METHOD
                    data: '{}',
                    async: true,
                    cache: false,
                    dataType: 'json', // DATA TYPE
                    beforeSend: function (xhr) {
                        // Set the Authorization header with the Bearer token
                        xhr.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('KeyToken'));
                        // This code is executed before the request is sent
                        // You can show a loading spinner or make other preparations
                        loader.show();
                    },
                    success: function (response) {
                        // HANDLES SUCCESS REPONSE
                        // You can hide the loader now
                        if (response.status) {
                            //Loader
                            loader.hide();
                            var dataCTC = JSON.parse(JSON.stringify(response.data));
                            //console.log(dataCTC);
                            for (var i = 0; i < dataCTC.length; i++) {
                                //alert(dataCTC[i].CompanyName);
                                //Remarks Notes Sticker Tape
                                //document.getElementsByClassName("remarks-notes")[0].textContent = dataCTC[i].Remarks;;
                                //Company Information
                                document.getElementById("_CCompanyName").value = dataCTC[i].CompanyName;
                                document.getElementById("_CAddress").value = dataCTC[i].Address;
                                document.getElementById("_CKindofOrganization").value = dataCTC[i].KindOfOrganization;
                                document.getElementById("_CBusinessNature").value = dataCTC[i].BusinessNature;
                                document.getElementById("_CPlaceofOrganization").value = dataCTC[i].PlaceOfOrganization;
                                document.getElementById("_CDateofOrganization").value = formatDate(dataCTC[i].DateOfOrganization);
                                document.getElementsByClassName("ctc-attachement-file")[0].src = dataCTC[i].File;
                                //Payment Information
                                document.getElementById("_CBasicTax").value = dataCTC[i].BasicCommunityTax;

                                document.getElementById("_CRealProperty").value = dataCTC[i].RealProperty;
                                document.getElementById("_CGrossReciept").value = dataCTC[i].GrossReceipts;
                                document.getElementById("_CTotal").value = dataCTC[i].Total;
                                document.getElementById("_CInterest").value = dataCTC[i].Interest;
                                document.getElementById("_CAmountToPay").value = dataCTC[i].AmountToPay;
                                
                            }

                            document.getElementById("_AttachementFile2").style.display = "none";
                            document.getElementsByClassName("ctc-file-attachement2")[0].innerHTML='<button type="button" class="btn btn-light btn-sm btnView" data-bs-toggle="modal" data-bs-target="#appViewCTCAttachement"><img class="icon-view" src="https://cdn-icons-png.flaticon.com/128/11677/11677497.png" width="30" height="30" alt="View" title="View">View Attachement</button>';
                            document.getElementsByClassName("_BtnSubmitCorporationCedula")[0].style.display = "none";

                        }
                    },
                    error: function (xhr, status, errorThrown) {
                        // HANDLES ERROR REPONSE
                        //console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                        console.log(xhr.responseText); // Log the response text received from the server
                        //console.log(errorThrown);
                    }
                });
                //End 
            }
            event.stopPropagation();
        }
        //End View Data
        

        //Field Enabled
        function  fieldDisabled(){
            //Select all input, select, and radio elements on the page
            var fields = document.querySelectorAll('input[type="text"], select, input[type="radio"]');
            //Loop through the selected elements and set readOnly to true
            for (var i = 0; i < fields.length; i++) {
                fields[i].readOnly = true;
                fields[i].style.pointerEvents = "none";
            }
        }
        //Field Enabled
        function  fieldEnabled(){
            //Select all input, select, and radio elements on the page
            var fields = document.querySelectorAll('input[type="text"], select, input[type="radio"]');
            //Loop through the selected elements and set readOnly to true
            for (var i = 0; i < fields.length; i++) {
                fields[i].readOnly = false;
                fields[i].style.pointerEvents = "auto";
            }
        }

        //PayNow
        function transactionPayNow(key,event){
            //Handle The Parameter and split It
            const parameter = key.split('+');
            const _ctcType = parameter[0];
            const _email = parameter[1];
            const _id = parameter[2];
            const _fname = parameter[3];
            const _mname = parameter[4];
            const _lname = parameter[5];
            const _address = parameter[6];
            const _total = parameter[7];
            const _totalAmt = parameter[8];

           var payload = {
                "universalCheckout": {
                            "payorInfo": {
                                "accountNo": _id,
                                "firstName": _fname,
                                "lastName": _lname,
                                "middleName": _mname,
                                "suffix": null,
                                "address": _address,
                                "email": _email
                            },
                            "billingData": {
                                "transrefNo": null,
                                "assessmentNo": _id,
                                "billingDate": null,
                                "sysTranDesc": _ctcType,
                                "sysTranAmt": _total,
                                "sysTran_TotalAmt": _totalAmt
                            },
                            "accountCodeData": {
                                "systran_providerCode": null,
                                "systran_MainCode": null,
                                "systran_AncestorCode": null,
                                "sysTran_SubAccCode": null
                            },
                            "systemInformation": {
                                "appName": "CEDULAAPP",
                                "urlOrigin": "https://online.spidc.com.ph/caloocan/WebPortal/CedulaApp/Taxpayer/index.html"
                            },
                            "notificationUrl": {
                                "url": "https://online.spidc.com.ph/caloocan/WebPortal/CedulaApp/Taxpayer/index.html"
                            }
                            }
                        }

                                //Make Ajax Call
                                $.ajax({
                                    type: 'POST',
                                    async: true,
                                    cache: false,
                                    url: '' + localStorage.getItem('url') +'api/v1/spidcproxy/universalcheckoutOAIMS',
                                    data: JSON.stringify(payload),
                                    contentType: 'application/json',
                                    beforeSend: function (xhr) {
                                        // Set the Authorization header with the Bearer token
                                        xhr.setRequestHeader('Authorization', localStorage.getItem('apiKey'));
                                        // This code is executed before the request is sent
                                        // You can show a loading spinner or make other preparations
                                        loader.show();
                                    },
                                    success: function (response) {
                                        // HANDLES SUCCESS REPONSE
                                        // You can hide the loader now
                                        if (response.status) {
                                            //Loader
                                            loader.hide();
                                            //Redirect For Checkout
                                            window.location.href = response.data.checkoutURL;
                                            //console.log(response);
                                        
                                        }
                                    },
                                    error: function (xhr, status, errorThrown) {
                                        // HANDLES ERROR REPONSE
                                        //console.log(xhr.status); // Log the HTTP status code (e.g., 500)
                                        console.log(xhr.responseText); // Log the response text received from the server
                                        //console.log(errorThrown);
                                    }
                                });
                                //End 


                        //console.log(JSON.stringify(payload));

            event.stopPropagation(); 
            //window.location.href="https://online.spidc.com.ph/spidc_web_api/UniversalCheckout/index.html"; 
        }
        //End PayNow


       
        


    </script>
</body>

</html>